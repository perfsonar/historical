= perfSONAR Lookup Service (LS) Scalability Tests =

<wiki:toc max_depth="6">
      
== Current Issues to Investigate in gLS/hLS Services ==

 *  Unknown scalability limits
 *  Unknown data consistency
 *  Failure modes are obscure and hard to debug
 *  Sometimes hLS registers empty summary data
 *  Possible XMLDB locking issues
 *  Behavior when using different values in configuration key "`ls_registration_interval`"
 *  Behavior when using different values in configuration key "`maintenance_interval`"


== Suggested tests ==

 *  Use `ls_registration_daemon` to temporarily register 'fake services'.  Jason has a service emulator [http://anonsvn.internet2.edu/svn/perfSONAR-PS/trunk/client/fakeService/ FakeService] that should help.
 *  Set up a test gLS and hLS, and then play with Jason's "!FakeService" tool to see when and how things break.
 *  Query the gLS and verify that everything what was registered is returned in the query. 
 *  Deploy the !FakeService on 50 ESnet hosts and see what happens.


== Testbed ==

 *  University of Delaware's Distributed and Meta-Systems Lab (DAMSL) will participate with 3 servers:
  *  _ale_.damsl.cis.udel.edu
  *  _moonshine_.damsl.cis.udel.edu
  *  _stout_.damsl.cis.udel.edu

 *  Create a new gLS 'cloud', i.e., a new hints file.  The current hints file is located at http://dc211.internet2.edu/gls.root.hints .  Make a new hints file like this that includes the gLS instances created for this testing, and place it on _stout_'s web server (/var/www/external).  The contents of the file will be:

{{{
  http://ale.damsl.cis.udel.edu:9990/perfSONAR_PS/services/gLS
}}}

 *  Install the !LookupService package:
  *  one gLS in _ale_, port 9990:  in the daemon.conf set '`root 1`'.
  *  one hLS in _moonshine_, standard port:  in the daemon.conf set '`root 0`'.

 *  After initial setup and testing:
  *  Install a total of 2 - 3 gLSs:  one at UDel, one at LBL, one somewhere else (could be UDel/LBL, or one in Ann Arbor).
  *  Install at least 3 hLS and probably more.
  *  Coordinate deployment of !FakeService on ESnet hosts on additional LSs.
 

== Findings and Report ==

=== Preparing _ale_ ===

 * Checked out perfSONAR repository into home directory.
 * In perfSONAR-PS/branches/RELEASE_3.1/perfSONAR_PS-!LookupService, ran
{{{
sudo make install
cd scripts
sudo ./install_dependencies.sh
sudo ./prepare_environment.sh 
}}}