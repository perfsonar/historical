= Functional Requirements for the pS-PS Service Remote Administration  web service=

This a _strawman_ discussion on the special web service to have running as part of the
any pS-PS service to provide an ability to reload configuration of the pS-PS service
and restart it. 

== Use case ==

The US CMS project have deployed 10 NTPtoolkit nodes. Due the changed requirements
one has to change schedule for all ping based tests running under PingER MP on all
deployemnts from once per 5 minute to once per minute. Right now one has to login
on each machine and change it by hand for all tests or ask about SSH access to each box
and devlop a script to do that. The first approach is a clear operational nightmare
and the second one is very hard to achieve in the long run plus it applies unnecessary
security risks and in some cases(Fermilab) is not possible without "avoiding" the
local PKI  infrastructure. 

== Required Functionality ==

The set of required functionality should include:
  * create/delete/update test
  * get list of tests
  * upload new config file with all tests
  * restart MP

== Proposed Solution ==

The list of requirements fits the best into the REST based web service.
Each MP would have such administrative web service which can be configured to run on
separate port with basic authentication over TLS/SSL. 
This service would be invoked by utilizing only REST actions:

  * GET - http://pspsserver/perfSONAR_PS/admin/pinger - will return status of the local MP and list of scheduled tests as JSON encoded string.
  * PUT - http://pspsserver/perfSONAR_PS/admin/pinger/test - will create new test and return JSON encoded string with configured test contents
  * POST - http://pspsserver/perfSONAR_PS/admin/pinger/test - will update test with submitted data encoded as JSON string
  * DELETE - http://pspsserver/perfSONAR_PS/admin/pinger/test/12345 will remove test with id 12345 from the PingER landmarks file where id can be obtained via GET action.
  * POST http://pspsserver/perfSONAR_PS/admin/pinger - will replace old landmarks config file with a new one
 
Of course we can simplify things by supporting only POST and GET and specifying actions in the body of the message. 
 
== Details ==

Lets review what is available right now and what should be developed.

Each service should have a local restart script and file based configuration option ( means any test can be scheduled/reconfigured by uploading a file).

=== Available pieces by pS-PS service ===

Please update the table below those who knows particular service well:

|| MP service || single file config || restart script ||
|| PingER     ||X||X ||
|| BWCTL      || ||X||
|| OWAMPD     || ||X||  
|| SNMP       || ||X||
|| Circuit    ||X||X||

=== Missing pieces ===

The webservice itself. It can be easily developed by utilizing perl's MVC called
Catalyst plus [http://search.cpan.org/~bobtfish/Catalyst-Action-REST-0.77/] plugin.
The basic authentication over TLS/SSL can be provided by the same means as NPToolkit admin GUI.

== Comments ??? ==