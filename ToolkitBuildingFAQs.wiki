#summary Information for building various components of the Toolkit

== Introduction ==

This page contains information about building the various components of the Toolkit.

== Kernel ==
The Toolkit includes a patched version of the CentOS 5 version of the Linux kernel.

To build this kernel, you will need a host with CentOS 5, and the 'rpm-build' package installed.

  * Download the most recent kernel Source RPM for CentOS 5.5
  * Download http://anonsvn.internet2.edu/svn/nptoolkit/trunk/software/kernel/srpm_patches/sources.patch
  * Install the kernel source RPM. This should install files into your RPM build directory (typically /usr/src/redhat if root)
  * cd to the 'SOURCES' directory in your RPM build directory
  * run 'patch -i sources.patch -p0'
  * cd to the 'SPECS' directory in your RPM build directory
  * Edit the file 'kernel-2.6.spec'
    * Set an appropriate buildid (e.g. .web100)
    * Add the web100 patch to the list of available patches (e.g. add a line like: Patch30000: web100-2.6.18-2.5.12-200609221010.patch)
      * Take note of the patch number specified
    * Add a line to tell the build process to apply the patch you just specified (e.g. add a line like: %patch30000 -p1)
    * If you want to add more patches, you'll need to follow the approach above
    * Update the changelog at the bottom to note any changes you've made
    * For examples of the changes, look at http://anonsvn.internet2.edu/svn/nptoolkit/trunk/software/kernel/srpm_patches/kernel-2.6_spec.patch
  * To build the kernel, run: rpmbuild -ba --target=i686 --without debug --without kabichk kernel-2.6.spec 2> build-err.log | tee build-out.log 
    * Note: the above command will put error messages into the file 'build-err.log'
  * To build the kernel headers (needed for building modules later), run: rpmbuild -ba --target=i386 --with headers kernel-2.6.spec 2> build-err.log | tee build-out.log
  * The RPMs (and a new SRPM) should now be available in the RPMS and SRPMS directories in your RPM build directory. They can either be installed directly, or added to a yum repository and installed via that method.

== Last Updated ==

$Id$
