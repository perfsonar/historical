This page is for discussion on the organization of various scripts that cache service information kept in the current LS infrastructure. 

== Architecture ==
The various components currently involved in caching information from the LS is described in the diagram below:
http://perfsonar-ps.googlecode.com/svn/wiki/LSCaching/lscache-arch.png

== Code Organization in SVN ==
The current organization of the code for the components above is not very conducive to organizing the RPMs. Two current RPM packages are affected by these change as listed below:
 # _perfAdmin_ - needs to include ls_cache_daemon so it can download the compressed cache file. Should no longer be running own copy of cache.pl.
 # _PingER-GUI_ - needs to include ls_cache_daemon so it can download compressed cache file. Should no longer be running own copy of pinger_cache.pl. 

A new package for sites like Internet2 and ESnet running servers that distribute the cache should also be developed (we'll tentatively call this *LSCacheBuilder*). Also to clarify its purpose, below it recommends to change the name of LSCacheDaemon to *LSCacheDownloader*. Below is a summary of the code and proposed changes to the locations of various files. There is also a column for soft links to the file since the components that download the cache are needed in both the PingER-Web-GUI and perfAdmin packages.

|| *Component* || *Current file location* || *New file location * || *Soft links*||
|| _cache.pl_ ||perfSONAR_PS-perfAdmin/bin/cache.pl||perfSONAR_PS-LSCacheBuilder/bin/cache.pl|| ||
|| _pinger_cache.pl_ ||perfSONAR_PS-PingER-GUI/bin/pinger_cache.pl||perfSONAR_PS-LSCacheBuilder/bin/pinger_cache.pl|| ||
|| _cache_package.pl_ ||perfSONAR_PS-perfAdmin/bin/cache_package.pl||perfSONAR_PS-LSCacheBuilder/bin/cache_package.pl|| ||
|| _ls_cache_daemon_ ||perfSONAR_PS-LSCacheDaemon/bin/daemon.pl||perfSONAR_PS-LSCacheDownloader/bin/daemon.pl||perfSONAR_PS-perfAdmin/bin/cache_dl_daemon.pl, perfSONAR_PS-PingER-GUI/bin/cache_dl_daemon.pl||
|| ||perfSONAR_PS-LSCacheDaemon/etc/ls_cache_daemon.conf||perfSONAR_PS-LSCacheDownloader/etc/ls_cache_downloader.conf||perfSONAR_PS-perfAdmin/etc/ls_cache_downloader.conf, perfSONAR_PS-PingER-GUI/etc/ls_cache_downloader.conf||
|| ||perfSONAR_PS-LSCacheDaemon/etc/ls_cache_daemon-logger.conf||perfSONAR_PS-LSCacheDownloader/etc/ls_cache_downloader-logger.conf||perfSONAR_PS-perfAdmin/etc/ls_cache_downloader-logger.conf, perfSONAR_PS-PingER-GUI/etc/ls_cache_downloader-logger.conf||
|| ||perfSONAR_PS-LSCacheDaemon/lib/perfSONAR_PS/LSCacheDaemon/LSCacheHandler.pm||perfSONAR_PS-LSCacheDownloader/lib/perfSONAR_PS/LSCacheDownloader/LSCacheHandler.pm||perfSONAR_PS-perfAdmin/lib/perfSONAR_PS/LSCacheDownloader/LSCacheHandler.pm, perfSONAR_PS-PingER-GUI/lib/perfSONAR_PS/LSCacheDownloader/LSCacheHandler.pm||
|| ||perfSONAR_PS-LSCacheDaemon/scripts/ls_cache_daemon||perfSONAR_PS-LSCacheDownloader/scripts/ls_cache_downloader||perfSONAR_PS-perfAdmin/scripts/ls_cache_downloader, perfSONAR_PS-PingER-GUI/scripts/ls_cache_downloader||
