= Operational Document for LHC Tier2-BCP =

*_DRAFT_*

 * [Tier2Operations#Introduction Introduction]
 * [Tier2Operations#Users_Expectations User's Expectations]
   * [Tier2Operations#Network_Performance Network Performance]
   * [Tier2Operations#Monitoring_Framework Monitoring Framework]
 * [Tier2Operations#Basic_Operational_Concepts Basic Operational Concepts]
   * [Tier2Operations#Operational_requirements Operational requirements]
   * [Tier2Operations#Network_Monitoring_Framework_deployment Network Monitoring Framework deployment]
 * [Tier2Operations#Network_Monitoring_Framework_Operations Network Monitoring Framework Operations]
   * [Tier2Operations#Operating_authority Operating authority]
   * [Tier2Operations#Deployment_options Deployment options]
   * [Tier2Operations#On_demand_monitoring On demand monitoring]
   * [Tier2Operations#Scheduled_monitoring Scheduled monitoring]
   * [Tier2Operations#Visualization_of_the_bulk_monitoring_results Visualization of the bulk monitoring results]
   * [Tier2Operations#Authentication_Authorization_Accounting_Model Authentication Authorization Accounting Model (AAA)]
   * [Tier2Operations#Data_transfer_problems_identification Data transfer problems identification]
   * [Tier2Operations#Planning_for_the_future_network_capacity Planning for the future network capacity]
 * [Tier2Operations#References References]

== Introduction ==

This documents is presenting an operational guide for end-users of the LHC Tier-2 center.  It covers all basic operations of the proposed Network Monitoring Framework (NMF) presented in [http://code.google.com/p/perfsonar-ps/wiki/Tier2BCP Tier-2-BCP] and based on the set of web services provided by [http://code.google.com/p/perfsonar-ps/wiki/Home perfSONAR-PS] project, acknowledges various user's expectations from the deployed framework and introduces methodology designed to troubleshoot any *data transfer problems*. The goal of this document is to provide detailed information for any system administrator of the Tier-2 site with or without prior network knowledge.  There is a mutual understanding that users of the Tier-2 sites need a robust tool or service which will allow them to make educated decisions about quality of their data  transfers and will help with planning of their network capacity.  The tool or service must be easy to deploy and support with well defined list of capabilities, simple learning curve and without adding extra layer of complexity.

== Users Expectations ==

=== Network Performance ===

The user's expectations are commonly based on the bandwidth capacity of the end-to-end network path. It seems like any data transfer rate less then half of available bandwidth is assumed to be a network problem. Instead the problem maybe in the application itself, end-system hardware or overall load, OS parameters or combination of those factors.  In order to separate user's concerns the network performance analysis methodology should be applied. This leads to the more appropriate term - *Data Transfer Problem* instead of commonly over utilized *network problem.*

=== Monitoring Framework ===

From the past experience with deployed wide area network monitoring frameworks it is valid to note that easiness of NMF deployment will play significant role in the decision making process. Also, the level and responsiveness of support should be taken into considerations. One can not expect the same level of networking knowledge possessed by the end-host administrators and sometimes there could be significant "wizards gap". There should be option of managed service proposed for NMF deployment with opportunity of remote access for tuning and troubleshooting of the user's host system. Every step of the network performance troubleshooting workflow should be documented and available online.

== Basic Operational Concepts ==

=== Operational requirements === 

The operational model for NMF at Tier-2 sites is developed under assumption that network connectivity to Tier-2 might be not well provisioned and support for the end systems and Tier-2 network devices may vary significantly from site to site. Also, there is an understanding that set of requirements for Tier-2 NMF should be flexible enough to be handled by average system administrator. Since, the NMF is indeed collection of the web services then it is valid to talk about operational guide for the *Network Monitoring Services Architecture*. Lets summarize the list of the requirements:

 * Easy deployment
 * Secure deployment, support for different site (or virtual organization) security models
 * Minimal set of extra requirements for the end host
 * Simple learning curve
 * Remote support or option of managed service

From other side we do have requirements for the minimal set of services to be deployed in order to support *Data Transfer Problems Identification* workflow.

=== Network Monitoring Framework deployment === 

In the [http://code.google.com/p/perfsonar-ps/wiki/Tier2BCP Tier-2-BCP] there is a full coverage for the list of required network monitoring tools and services to be deployed.

== Network Monitoring Framework Operations ==

=== Operating authority === 

For Tier-1 - Tier-2 network links the NOC at corresponded Tier-1 center will be responsible for operating support, management and analysis of the data transfer problems.

=== Deployment options === 

 * Single Public server, all serves and data are available for the world
 
This is the most anticipated and default deployment model, most easy to configure and support.
 
 * Single Public server, some services and data are protected by AAA, some public

For Tier2 site this is the second option, site needs to provide minimal set of services publicly available.

 * Two servers:
   * One is public and provides services and data to the world and located in DMZ zone
   * Second server is private and located on the internal subnet of interest. Some data are published on the public server, some only available 

This is the least favorite option. It will require much greater level of support from the site's sysadmins.

In order to participate in *Data Transfer Problems Identification* workflow, site will be required to provide minimal set of public services on the Public server in DMZ zone.

=== On demand monitoring === 

See [http://code.google.com/p/perfsonar-ps/wiki/Tier2BCP Tier-2-BCP] document for the minimal set of services

=== Scheduled monitoring === 

See [http://code.google.com/p/perfsonar-ps/wiki/Tier2BCP Tier-2-BCP] document for the minimal set of services

=== Visualization of the bulk monitoring results === 

There are several web based tools provided by perfSONAR-PS bundle. Most of them are in development.

=== Authentication Authorization Accounting Model (AAA) === 

for Public servers there is no AAA applied except for webadmin accessible from locahost only and TLS based authentication and authorization in case of remote webadmin access.

=== Data transfer problems identification === 

There is little of value from any monitoring system without applying results of the observations into some structured way and approaching any network performance related problem without preexisting methodology in mind. The NMF will not give you any definitive answer without analyzing step by step the matrix of available parameters. Those steps are in details outlined in [https://plone3.fnal.gov/P0/WAN/netperf/methodology/ 2]. The summary is presented below:

 # Definition of the problem space:
   * End user completes a text-based template that provides basic information on the scope, characteristics on the nature of the problem, as well as specific information on the systems & applications involved.
 # Collection of system information & network path characteristics:
   * End user provides output from provided scripts run on local system(s).
   * End user also provides network path information using specified tool
 # Host configuration analysis:
   * Tier-1 NOC staff analyzes host configuration(s).
   * Recommendations for modification provided, if appropriate.
 # Network path performance analysis:
   * Tier-1 NOC staff analyzes and evaluates network path performance characteristics.
   * If problems are found, analysis of nature of problem (systemic versus congestion-based) is done.
 # Evaluate packet flow patterns:
   * Tier-1 NOC staff collect packet traces from TCPdump ran on end-system and analyzes it with TCPtrace/Xplot graphical tools

=== Planning for the future network capacity === 

This kind of recommendations are given by Operating Authority upon request from the particular Tier2 center. Specific details about analysis which has to be done will follow...

== References ==

 # [http://code.google.com/p/perfsonar-ps/wiki/Home perfSONAR-PS]
 # [https://plone3.fnal.gov/P0/WAN/netperf/methodology End-to-End Network Performance Troubleshooting Methodology]

= Last Updated =

$Id$