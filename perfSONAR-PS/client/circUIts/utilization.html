<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
   <title>PlotKit: Axis Test</title>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <link href="/css/page.css" media="screen" rel="Stylesheet"
   type="text/css" />
   <link href="tests.css" media="screen" rel="Stylesheet" type="text/css" />
   <!--   <script src="./js/json.js" type="text/javascript"></script> -->
   <script src="./js/MochiKit/MochiKit.js" type="text/javascript"></script>
   <script src="./js/PlotKit/excanvas.js" type="text/javascript"></script>
   <script src="./js/PlotKit/PlotKit_Packed.js" type="text/javascript"></script>
</head>


<body>
    <div id="body">
        <h2>Network Utilization</h2>
    
        <div id="div-example"
            style="margin: 0 auto 0 auto;">
            <canvas id="canvas-example"
            width="400" height="400"
            style="border: 1px solid #eee;">
            </canvas>
        </div>
        <input id="start-stop" type="button" value="Stop">

        <script type="text/javascript">

            var options = {
                "xAxis": [1,4],
                "xOriginIsZero": false,
                "yAxis":[1,6],
                "yOriginIsZero": false
            };
            var layout = null;
            var renderer = null;
            var go = true;

            function initGraph(){
                layout = new PlotKit.Layout("line",options);

                newData();

                renderer = new SweetCanvasRenderer($('canvas-example'),
                        layout,options);
                MochiKit.Signal.connect("start-stop", 'onclick', startStop);
            }

            function newData(){
                if(!go) return;
                var doreq = MochiKit.Async.doSimpleXMLHttpRequest("json.txt");
                doreq.addCallback(loadData);
            }

            function loadData(req) {

                if(!go) return;

                var json = MochiKit.Async.evalJSONRequest(req);

                var output = "";
                for(name in json.servdata){
                    output += name + "\n";
                }

                layout.addDataset("sample",json.servdata.data);
                layout.evaluate();
                renderer.clear();
                renderer.render();

                MochiKit.Async.callLater(1,newData);
            }

            function startStop(){
                go = !go;

                if(go){
                    $('start-stop').value = "Stop";
                    newData();
                }
                else{
                    $('start-stop').value = "Start";
                }
            }

            addLoadEvent(initGraph);

        </script>
    </div>
    
    <div class="footer"><a href="http://www.liquidx.net/plotkit/">PlotKit</a></div>    
</div>
</body></html>
