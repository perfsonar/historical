<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>How fast you wanna go?</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script src="./js/MochiKit/MochiKit.js" type="text/javascript"></script>
        <script src="./js/PlotKit/excanvas.js" type="text/javascript"></script>
        <script src="./js/PlotKit/PlotKit_Packed.js" type="text/javascript"></script>
        <script src="./utilization.js" type="text/javascript"></script>
        <script src="./speed.js" type="text/javascript"></script>
    </head>

<script type="text/javascript">

var hostInterfaces = {
    "anna-raptor1.internet2.edu": {
        "name": "Ann Arbor",
        "data": ["1010001", "1020001"],
    },
    "206.196.176.229": {
        "name": "McLean",
        "data": [
            "1000004",
            "1020001",
            "1000001",
            "1000002",
            "1010001",
            "1010012",
            "1020002",
            ],
    },
    "chin-force10.hopi.internet2.edu": {
        "name": "Chicago",
        "data": [
            "34144278",
            ],
    },
};

function updateHost(){
    var hosti = document.forms["options"].hostName.selectedIndex;
    var host = document.forms["options"].hostName[hosti].value;
    var ifName = document.forms["options"].ifName;

    // remove current ifNames
    while(ifName.length > 0){
        ifName.remove(0);
    }

    // add set for newly selected host
    var i;
    var data = hostInterfaces[host].data;
    for(i=0;i<data.length;i++){
        var o=document.createElement('option');
        o.text=data[i];
        try{
            ifName.add(o,null);
        }
        catch(ex){
            ifName.add(o);
        }

    }
}


addLoadEvent(initGraph);
addLoadEvent(initSpeed);
addLoadEvent(updateHost);

var getHost = function(){

    return document.forms["options"].hostName.value;
}
var getInterface = function(){
    var ifName = document.forms["options"].ifName;

    return ifName.value;
}

var getDirection = function(){
    var direction = document.forms["options"].direction;

    return direction.value;
}

createLoggingPane();
</script>

<body>
    <div id="body" style="background: #fafafa">
        <table align="center">
            <tr>
                <th><img src="i2-clear.png"></th>
                <th><img src="perfsonar_logo_small.png"></th>
                <th><img src="i2-clear.png"></th>
            </tr>
        </table>
        <table align="center" cellpadding=10>
            <tr>
                <td align="left" valign="top">
                    <div id="form-fields">
                        <form name="options">
                            <select id="hostName" name="hostName" onChange="updateHost();">
                                <option value="anna-raptor1.internet2.edu">Ann Arbor</option>
                                <option value="206.196.176.229">McLean</option>
                                <option value="chin-force10.hopi.internet2.edu">Chicago</option>
                            </select>
                            <select id="ifName" name="ifName">
                            </select>
                            <select id="direction" name="direction">
                                <option value="in">in</option>
                                <option value="out">out</option>
                            </select>
                        </form>
                    </div>
                </td>
                <td valign="top">
                    <div id="div-example">
                        <canvas id="plot" width="400" height="420"
                        style="border: 0px solid #eee;">
                        </canvas>
                    </div>
                    <p id="plot-value" align="center"> </p>
                </td>
                <td valign="top">
                    <div id="div2-example">
                        <canvas id="speedo" width="75" height="400"
                        style="border: 4px solid #aaa; background: #5a5a5a;">
                        </canvas>
                    <p id="speedo-value" align="center">-</p>
                    </div>
                </td>
            </tr>
            <tr>
                <td align="center">
                    <input id="start-stop-util" type="button" value="Stop"/>
                </td>
                <td align="center">
                    <input id="start-stop-speed" type="button" value="Stop"/>
                </td>
            </tr>
        </table>

    </div>
</body></html>
