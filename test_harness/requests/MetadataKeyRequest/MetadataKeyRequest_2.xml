<?xml version="1.0" encoding="UTF-8"?>

<!-- 
Name:     MetadataKeyRequest_2.xml

Purpose:  Test the 'MetadataKeyRequest' Message by sending a metadata element
          and a 'chain' of filtering elements.  The result should be a key
          element, or an error if the request can not be honoroed or the data
          cannot be found.
          
Varients: 
          - Send a more complete metadata (to expand the subsequent XPath
            expression and produce less results) to test performance.
          - Send less complete metadata (to reduce the subsequent XPath
            expression and produce more results) to test performance
          - Send multiple metadata elements to test correctness/performance.
          - Use a data trigger for both the original and the chain to test
            performance.
          - Vary select times, resolutions to test correctness/performance
          
Caveots:  Information in the metadata (both data and selection) will vary
          from instance to instance: re-enter according to the storage of a
          particular deployment.

Results:  
          - Correct:   At least one, possible more key structure(s) for a
                       given metadata.  These key structures will be 'cooked', 
                       meaning that the select information will be inserted into
                       the key if applicable.
          - Incorrect: A result datum with an error condition for a given
                       metadata.
                       
          Note that in a single message it will be possible to have error
          conditions and success conditions for each metadata/data pair.  

Version:  $Id:$
-->

<nmwg:message type="MetadataKeyRequest" id="metadataKeyRequest1"
              xmlns:netutil="http://ggf.org/ns/nmwg/characteristic/utilization/2.0/"
              xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/"
              xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/"
              xmlns:nmwgt="http://ggf.org/ns/nmwg/topology/2.0/"
              xmlns:nmtm="http://ggf.org/ns/nmwg/time/2.0/">

  <nmwg:metadata id="m1" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/">
    <netutil:subject id="s1" 
                     xmlns:netutil="http://ggf.org/ns/nmwg/characteristic/utilization/2.0/" >
      <nmwgt:interface xmlns:nmwgt="http://ggf.org/ns/nmwg/topology/2.0/">
        <nmwgt:ifAddress type="ipv4">127.0.0.1</nmwgt:ifAddress>
        <nmwgt:direction>in</nmwgt:direction>
      </nmwgt:interface>
    </netutil:subject>
    <nmwg:eventType>http://ggf.org/ns/nmwg/characteristic/utilization/2.0</nmwg:eventType>
    <nmwg:parameters id="p1">
      <nmwg:parameter name="supportedEventType">http://ggf.org/ns/nmwg/characteristic/utilization/2.0</nmwg:parameter>
    </nmwg:parameters>
  </nmwg:metadata> 

  <nmwg:metadata id="m1c" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/">
    <select:subject id="s1c" metadataIdRef="m1" xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/"/> 
    <select:parameters id="p1c" xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/">      
      <nmwg:parameter name="startTime">1121472000</nmwg:parameter>
      <nmwg:parameter name="endTime">1121472600</nmwg:parameter>
      <nmwg:parameter name="consolidationFunction">AVERAGE</nmwg:parameter>
      <nmwg:parameter name="resolution">60</nmwg:parameter>
    </select:parameters>
    <nmwg:eventType>http://ggf.org/ns/nmwg/ops/select/2.0</nmwg:eventType> 
  </nmwg:metadata>
  
  <nmwg:data id="d1" metadataIdRef="m1c" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/"/>
  
</nmwg:message>
