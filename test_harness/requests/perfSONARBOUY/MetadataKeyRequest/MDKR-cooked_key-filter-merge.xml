<?xml version="1.0" encoding="UTF-8"?>

<!--
     Name:    MDKR-cooked_key-filter-merge.xml
     Purpose: MetadataKeyRequest by sending a cooked key (either valid or
              invalid) and then re-chaining via subject chaining to re-cook
              the key, merge chaining is also tested.
              
     NOTE:    Is this a valid case anyway?     
              
     Outcome:
              Invalid:   New cooked key returned
              valid:     Error message
-->

<nmwg:message type="MetadataKeyRequest" id="metadataKeyRequest1"
              xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/">

  <nmwg:metadata id="m1" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/">
    <nmwg:key id="k1">
      <nmwg:parameters id="pk1">
        <nmwg:parameter name="maKey">ea4f4f40a32578c69869a360579150d7</nmwg:parameter>
        <nmwg:parameter name="startTime">1105452600</nmwg:parameter>
        <nmwg:parameter name="endTime">1105453100</nmwg:parameter>
      </nmwg:parameters>
    </nmwg:key>
  </nmwg:metadata> 
  
  <nmwg:metadata id="m1c" metadataIdRef="m1cm" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/">
    <select:subject id="s1c" metadataIdRef="m1" xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/"/> 
    <select:parameters id="p1c" xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/">      
      <nmwg:parameter name="startTime">1105452111</nmwg:parameter>
    </select:parameters>
    <nmwg:eventType>http://ggf.org/ns/nmwg/ops/select/2.0</nmwg:eventType> 
  </nmwg:metadata>

  <nmwg:metadata id="m1cm" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/">
    <select:subject id="s1cm" xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/"/> 
    <select:parameters id="p1cm" xmlns:select="http://ggf.org/ns/nmwg/ops/select/2.0/">      
      <nmwg:parameter name="endTime">1105453111</nmwg:parameter>
    </select:parameters>
    <nmwg:eventType>http://ggf.org/ns/nmwg/ops/select/2.0</nmwg:eventType> 
  </nmwg:metadata>

  <nmwg:data id="d1" metadataIdRef="m1c" xmlns:nmwg="http://ggf.org/ns/nmwg/base/2.0/"/>
  
</nmwg:message>
