#summary Deploying perfSONAR-PS Infrastructure on a Private Network

<wiki:toc max_depth="6" />

== Introduction ==

The following guide outlines the steps necessary to install perfSONAR-PS and related measurement tools on a private network such as a protected LAN or VPN.  The major stumbling block to this approach is the use of the perfSONAR-PS information services which, by design, federate on a global scale.  It is possible to simulate a _private_ information service cloud within a local setting, but note that this prevents searching for and obtaining measurements from anything but this local network.  

The steps to setup, test, and use a localized deployment are listed below.  Note that the installation and configuration procedure for many of the services is the same as a _regular_ deployment, with minor modifications necessary to certain services to allow for the use of local information services.  

== Setup ==

The following section describes the setup of 2 major classes of software:

 * _*Measurement Tools*_
 * _*perfSONAR Tools*_

Caveats and tips are provided in each section where the setup may be different from traditional use cases.  

=== Measurement tools ===

The lowest level of the perfSONAR framework are tools to perform and collect network and performance measurements.  These tools are normally not under the control a perfSONAR-based control system and should be installed and treated as independent entities.  

==== OWAMP ====

[http://www.internet2.edu/performance/owamp/ OWAMP] is _one way ping_.  This software is available as both [http://software.internet2.edu/rpms/ RPM] and [http://software.internet2.edu/sources/owamp/ source] releases.  There are no changes to the standard installation procedure.

==== BWCTL ====

[http://www.internet2.edu/performance/bwctl/ BWCTL] is software that utilizes bandwidth testing tools such as [http://sourceforge.net/projects/iperf/ iperf].  This software is available as both [http://software.internet2.edu/rpms/ RPM] and [http://software.internet2.edu/sources/bwctl/ source] releases.  There are no changes to the standard installation procedure.

==== SNMP and Cacti ====

SNMP is a protocol available on many network devices that delivers performance information in a passive manner.  [http://www.cacti.net/ Cacti] is a complete network collection and graphing solution designed to gather, store, process, and display performance information.  There are no changes to the standard installation procedure.

=== perfSONAR Tools ===

There are 3 major classes of perfSONAR-PS tools:

 * _*Information Services*_
 * _*Measurement Archives*_
 * _*Visualization*_

All three require some slight modification to work in a private environment, but this is almost always related to the interaction with the _*Information Services*_ components.  

==== Information Services ====

See LocalLSDeployment for a step by step guide on installing localized instances of the perfSONAR-PS information services.  

==== Measurement Archives ==== 

Measurement archives store collected measurements.  Three different tools will be explained here:

 * _*SNMP MA*_
 * _*perfSONARBUOY*_
 * _*PingER*_

There are mininimal modifications that must be made to each tool for localized use.  

===== SNMP MA =====

The SNMP MA works in conjunction with Cacti to deliver collected SNMP Measurements.  There are no changes to the standard installation procedure and the [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-SNMPMA/doc/INSTALL INSTALL] and [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-SNMPMA/doc/README README] files from the installation package shoulld be consulted.  

There are minimal changes to the _*daemon.conf*_ file, these changes will be outlined:

 * _*Cacti Configurations*_ - Un-comment the following:
{{{
                                                        # Sample Cacti configuration
            metadata_db_external                   cacti
            metadata_db_external_source            /etc/cacti/cactid.conf
}}}
 * _*LS configuration*_ - Change _ls_instance_ (all instances), see choices from [LocalizedPerfSONAR#Information#Services Information Services]
{{{
            ls_instance                             http://LOCAL_INSTALLATION_OF_HLS:9995/perfSONAR_PS/services/hLS
}}}
 * _*gLS Hints Configuration*_ - Change the location of the hints url, see choices from [LocalizedPerfSONAR#Information#Services Information Services]
{{{
            root_hints_url                          http://LOCAL_INSTALLATION_OF_HINTS_FILE/gls.root.hints
}}}

===== perfSONARBUOY =====

perfSONARBUOY is a framework for performing, collecting, and storing OWAMP and BWCTL measurements.  There are no changes to the standard installation procedure and the [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-perfSONARBUOY/doc/INSTALL INSTALL] and [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-perfSONARBUOY/doc/README README] files from the installation package should be consulted. 

There are minimal changes to the _*daemon.conf*_ file, these changes will be outlined:

 * _*LS configuration*_ - Change _ls_instance_ (all instances), see choices from [LocalizedPerfSONAR#Information#Services Information Services]
{{{
            ls_instance                             http://LOCAL_INSTALLATION_OF_HLS:9995/perfSONAR_PS/services/hLS
}}}
 * _*gLS Hints Configuration*_ - Change the location of the hints url, see choices from [LocalizedPerfSONAR#Information#Services Information Services]
{{{
            root_hints_url                          http://LOCAL_INSTALLATION_OF_HINTS_FILE/gls.root.hints
}}}

Be sure to read and edit the _*owmesh.conf*_ file following the notes in the file and the [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-perfSONARBUOY/doc/INSTALL INSTALL] and [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-perfSONARBUOY/doc/README README] files.  Note that private and local IPs will work for this service.  

===== PingER =====

PingER is a combination measurement scheduling, collection, and storage service for the Ping tool.  There are no changes to the standard installation procedure and the [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-PingER/doc/INSTALL INSTALL] and [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-PingER/doc/README README] files from the installation package should be consulted. 

There are minimal changes to the _*daemon.conf*_ file, these changes will be outlined:

 * _*LS configuration*_ - Change _ls_instance_ (all instances), see choices from [LocalizedPerfSONAR#Information#Services Information Services]
{{{
            ls_instance                             http://LOCAL_INSTALLATION_OF_HLS:9995/perfSONAR_PS/services/hLS
}}}
 * _*gLS Hints Configuration*_ - Change the location of the hints url, see choices from [LocalizedPerfSONAR#Information#Services Information Services]
{{{
            root_hints_url                          http://LOCAL_INSTALLATION_OF_HINTS_FILE/gls.root.hints
}}}

Be sure to read and edit the _*pinger_landmarks.xml*_ file following the instructions listed in [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-PingER/doc/INSTALL INSTALL] and [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-PingER/doc/README README].  Note that private and local IPs will work for this service.  

==== Visualization ====

There are two main visualizations to display collected perfSONAR data:

 * _*perfAdmin*_
 * _*PingER GUI*_

perfAdmin has graphs for SNMP, PingER, and perfSONARBUOY data.  PingER GUI is just for PingER data.  

===== perfAdmin =====

See LocalLSDeployment for a step by step guide on installing perfAdmin and using it with localized perfSONAR-PS information services.  

===== PingER GUI =====

The PingER GUI is used to display data from the PingER.  There are no changes to the standard installation procedure and the [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-PingER-GUI/doc/INSTALL INSTALL] and [http://anonsvn.internet2.edu/svn/perfSONAR-PS/tags/RELEASE_3.1/perfSONAR_PS-PingER-GUI/doc/README README] files from the installation package should be consulted. 

A minor change is necessary to the _*pinger_cache.pl*_ file, change:

{{{
my $hints  = "http://www.perfsonar.net/gls.root.hint";
}}}

To whatever was decided in the [LocalizedPerfSONAR#Information#Services Information Services] section.  

== Testing ==

TBD

== Use ==

TBD

== FAQ ==

TBD

== Last Updated ==

$Id$
