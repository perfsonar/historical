<HTML>
<HEAD>
<Title>BaseChart.makeTmpFile</Title>
<link type='text/css' rel='Stylesheet' href="maxchartapi.css" />
</HEAD>
<body bgcolor="#FFFFFF" text="#000000" topmargin="0" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0">

<p class="heading0">ChartDirector Ver 4.1 (Perl Edition)</p>
<p class="heading1"><a href="BaseChart.htm">BaseChart</a>.makeTmpFile</p>
<hr class="separator">
<p class="heading2a">Usage</p>
<div class="content">
makeTmpFile(dirname [, imageFormat [, lifeTime ]])
</div>
<p class="heading2">Description</p>
<div class="content">
Generates the chart as an image and save it to a temporary file, and automatically remove old files.<br><br>
This method is designed to support web applications styles where the chart is generated in the HTML page (eg. applications involving clickable charts). In HTML, an image can only be delivered using an &lt;IMG&gt; tag in the page. So after the chart image is created, it needs to be stored in the server temporarily to wait for the browser to retrieve it using the &lt;IMG&gt; tag URL.<br><br>
(An alternative would be to create the chart image when the server receives the &lt;IMG&gt; tag URL request from the browser. In this method, the chart image can be streamed directly to the browser without any temporary storage.)<br><br>
The makeTmpFile method creates the temporary file in the directory specified by <b>dirname</b>. To avoid building up of too many temporary files, it will automatically remove all files older than a certain life time (default 600 seconds) in that directory.<br><br>
Note that the <b>dirname</b> is a file system path, not a URL path. For example, the directory "/tmp/tmpcharts" means a path relative to the root of the hard disk, not the root of the web document directory.<br><br>
It is not uncommon to use a temporary directory outside of the web document directory, (such as under the /tmp directory). However, that means the image cannot be referenced in the &lt;IMG&gt; tag URL. To address these cases, ChartDirector includes a utility script "getchart.pl" that can be used to load a temporary file created by makeTmpFile. The URL will be like:<br><br>
<div style="margin-left:25;font-family:courier new,courier"> my $url = "getchart.pl?img=/tmp/tmpcharts/" . $c-&gt;makeTmpFile("/tmp/tmpcharts"); </div><br>
In the above, the makeTmpFile method creates a temporary file in the "/tmp/tmpcharts" directory, and returns the filename. The "getchart.pl?img=[full_path_name]" is then used to load the file.<br><br>
If makeTmpFile is unsuccessful, an empty string will be returned. In this case, please check that the temporary directory exists, and is readable and writable by the web server anonymous user .<br><br>
It is highly recommended you use a dedicated directory for storing temporary files created by ChartDirector. This is to avoid makeTmpFile from accidentally removing old files belonging to other applications.
</div>
<p class="heading2">Arguments</p>
<div class="content">
<table border="1" cellpadding="5" cellspacing="0" width="98%"> 
<tr>
<th width="19%">Argument</th><th width="19%">Default</th><th width="60%">Description</th>
</tr>
<tr>
<td>dirname</td><td>(Mandatory)</td><td>The directory to store the temporary file and to remove old files.</td></tr><tr><td>imageFormat</td><td><a href="perlchartdir.PNG.htm">PNG</a></td><td>A constant representing the format of the image. Must be one of the predefined constants <a href="perlchartdir.PNG.htm">PNG</a>, <a href="perlchartdir.JPG.htm">JPG</a>, <a href="perlchartdir.GIF.htm">GIF</a>, <a href="perlchartdir.BMP.htm">BMP</a> or <a href="perlchartdir.WMP.htm">WMP</a>.</td></tr><tr><td>lifeTime</td><td>600</td><td>The life time of files in seconds. Older files will be deleted. A negative value disables automatic temporary file removal.</td>
</tr>
</table>
</div>
<p class="heading2">Return Value</p>
<div class="content">
The temporary file name (not including the path), or an empty string in case of failure.
</div>
<br><hr class="separator">
<div class="copyright">&copy; 2008 Advanced Software Engineering Limited. All rights reserved.</div>
</body>
</HTML>
