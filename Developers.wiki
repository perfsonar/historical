#summary Guide for New Developers of perfSONAR-PS tools

<wiki:toc max_depth="6" />

== Introduction ==

Starting development for a new software project can be intimidating.  The following guide was created to point out the basics of both the tangible and intangible elements of developing software for the perfSONAR-PS infrastructure.  

== What Is perfSONAR-PS ==

perfSONAR-PS is a set of independent software services that implement the [http://www.perfsonar.net/ perfSONAR] protocols for network performance monitoring. perfSONAR-PS services are designed to be compatible with all other perfSONAR software that implements the perfSONAR protocols. perfSONAR-PS is able to federate between deployments, particularly those that span multiple domains, making the job of solving end-to-end performance problems on paths crossing several networks much easier to address.

The perfSONAR-PS services provide Web Services (WS) based interfaces into already deployed network monitoring infrastructures and act as an intermediate layer, between the performance measurement tools and the diagnostic or visualization applications. The targeted audience for these services is network Network Operation Centers (NOCs) at Universities and Regional networks, however these services are broadly useful to the general public at large. 

=== Service Examples ===

The following represent the current released products in the perfSONAR-PS framework.  Each serves a specific purpose that benefits the measurement framework as a whole.  

==== SNMP Measurement Archive ====

The perfSONAR-PS SNMP based Measurement Archive (SNMP MA) is able to expose data collected via variables from the Simple Network Management Protocol (SNMP) protocol found on networked devices and stored in Round Robin Databases (RRD) archives. The measurements are collected through external means, normally through software such as [http://oss.oetiker.ch/mrtg/ MRTG], [http://www.cacti.net Cacti], or [http://cricket.sourceforge.net/ Cricket], and is commonly stored in [http://oss.oetiker.ch/rrdtool/ RRD] archives. External access to commonly requested data items, remains challenging due to physical and political boundaries.

The SNMP MA provides a simple interface that is cable of exposing these files after basic configuration for consumption by perfSONAR client applications and services alike. The Web Service front end provides a uniform method of access using the perfSONAR XML protocols and delivers the data in an unambiguous manner, thus eliminating the mystery associated with the backend storage. 

For more information see also the development page: [SNMPMA].

==== Lookup Service ====

The perfSONAR-PS Lookup Service (LS) addresses the always challenging problem of resource registration and discovery for the perfSONAR framework. Service instances that manage datasets are only useful when they can be contacted by consumers. Consumers can only function when there is data available. To manage these problems in a dynamic environment such as perfSONAR, it is necessary to register, maintain, and query for the services that may contain interesting data.

The perfSONAR-PS LS relies on an XML database, [http://www.oracle.com/technology/products/berkeley-db/xml/index.html Oracle DB XML], to store service registration information in a native manner. Using the power of the [http://www.w3.org/TR/xpath XPath] and [http://www.w3.org/TR/xquery XQuery] standards it is then possible for client applications and services alike to query for information in a uniform and powerful manner. All perfSONAR services are capable of registering information with an LS instantiation, thus deploying this service within your framework is paramount. 

For more information see also the development page: [LS].

==== Topology Service ====

The perfSONAR-PS Topology Service provides the ability for administrators to make topology information about their networks available to remote clients. Client applications and services can be written that use the [http://www.w3.org/TR/xquery XQuery] language to perform arbitrarily complex queries against the data stored in the database. The Topology information returned by the topology service follows the perfSONAR Topology XML schema being developed in coordination with the the DICE Control Plane Working Group. The Topology Service stores the topology information in the [http://www.oracle.com/technology/products/berkeley-db/xml/index.html Oracle DB XML] XML database.

==== Status Measurement Archive ====

There are two types of status services: measurement and circuit.

The Status Measurement Archive provides a way for an administrator to provide layer2 link status information to remote clients. This information can be obtained via a polling service that can use SNMP, or scripts to collect the link status information, and stores it into a SQL database. The technique used to store the information helps minimize the storage requirements of rarely changing links.  This service is compatible with [https://wiki.man.poznan.pl/perfsonar-mdm/index.php/Geant2_E2E_Monitoring_System_Software_Downloads E2EMon], a commonly used service that provides a webpage containing status information about inter-domain circuits. In order to produce the webpage, the service requests the complete state of each domain in the circuits it has an interest in and then correlates this information to produce end-to-end statistics. This Circuit Status service uses the Status Measurement Archive and can use the Topology Service to provide the complete domain status required by the E2EMon service.

==== PingER ====

The perfSONAR-PS PingER service is an evolution of the [http://www-iepm.slac.stanford.edu/pinger PingER project] with more than 10 years experience in collecting and analysising network performance across the world. The perfSONAR-PS PingER service is composed of both a storage backend (MA) and measurement frontend (MP) to conduct and store ping measurements and to make available such data for consumption by interested parties. Network characteristics supported include availability, latency and jitter, which provide a broad spectrum of determining end-to-end network performance.

perfSONAR-PS PingER is designed to be scalable enough in order to accommodate hundreds of monitored pairs of hosts and uses a relational database backend (MySQL, Postgres, SQLite) to efficiently store and retrieve such performance information.

perfSONAR-PS PingER also supports the registration of data through perfSONAR LS's to facilitate the dynamic discovery and querying of unknown deployments.

The MA provides a web service interface based on [http://nmwg.internet2.edu/ NMWG XML] that allows queries on the PingER data and to be consumed by perfSONAR client applications and services alike.

==== perfSONAR-BUOY Measurement Archive ====

The perfSONAR-BUOY Measurement Archive service (pSB MA) exposes active measurement data, making the results available through perfSONAR web services interfaces. All performance tests are performed via the [http://e2epi.internet2.edu/bwctl BWCTL] tool (throughput measurements) and currently consist of regularly-scheduled [http://sourceforge.net/projects/iperf Iperf] tests to a configurable list of source and destination hosts.

Data collected through the BWCTL interaction is stored in a MySQL database. Active measurements between known hosts are particularly valuable when assuring connectivity, availability, and quality of the network. perfSONAR-BUOY allows for the easy configuration of a "mesh" of tests to hosts equipped with BWCTL. Based on a configurable schedule, the tests will be conducted autonomously and stored for consumption via the perfSONAR-BUOY interface as well as presentation through included web scripts. Using the same XML protocols as the the other perfSONAR services, perfSONAR-BUOY provides uncomplicated access methods to retrieve the data in an unambiguous manner, thus eliminating the mystery associated with the backend storage. Closely coupled with development on BWCTL, perfSONAR-BUOY will soon offer data originating from sources besides Iperf such as [http://e2epi.internet2.edu/owamp OWAMP] (latency measurements).

==== LS Registration Daemon ====

The perfSONAR-PS LS Registration Daemon allows networks to register their [http://e2epi.internet2.edu/bwctl BWCTL], [http://e2epi.internet2.edu/owamp OWAMP], [http://e2epi.internet2.edu/ndt NDT], [http://www.psc.edu/networking/projects/pathdiag/ NPAD] and [http://damsl.cis.udel.edu/projects/phoebus/ Phoebus] services with a perfSONAR-PS Lookup Service. This allows interested clients to search for and find the network's services. 

==== Traceroute MA and MP ====

The Traceroute service consists of a configurable MP to perform scripted traceroutes on a time based schedule.  The resulting traceroutes are collected and made available through a web services interface.  

=== Client Examples ===

In addition to the services of the perfSONAR framework there are several client applications that locate and consume data.  Presentation can be in the form of graphical interfaces, or even systems to alarm based on performance thresholds.  

==== Client APIs ====

A series of APIs for dealing with general service concepts (e.g. MA API) as well as specific service incarnations (e.g. PingER, gLS and hLS) are available and used on some of the subsequent client examples.  These APIs are written in perl but could be extended to other languages.  

==== NAGIOS Plugins ====

NAGIOS is a network monitoring tool that continuously monitors the health of network components. This can be as simple as a TCP connect to check liveness, or as complex as a series of tests to analyze data.  The perfSONAR-PS project has developed a set of plugins:

 # _*check_ls.pl*_ - Checks the responsiveness of all forms of LS service
 # _*check_gls.pl*_ - Checks the contents of the gLS service for correctness  
 # _*check_hls.pl*_ - Checks the contents of the hLS service for correctness
 # _*check_pinger.pl*_ - Checks the data of the PingER service for certain conditions (e.g. excessive loss or jitter)
 # _*check_topology.pl*_ - Checks the contents of the topology service for correctness.
 # _*check_snmp.pl*_ - Checks the data of the SNMP MA service for certain conditions (e.g. if an interface has high utilization)
 # _*check_throughput.pl*_ - Checks the data of the perfSONAR-BUOY service for certain conditions (e.g. if throughput has dropped below an expected value)
 # _*check_owdelay.pl*_ - Checks the data of the perfSONAR-BUOY service for certain conditions (e.g. if jitter has risen to an unexpected value)
 # _*check_perfSONAR.pl*_ - General service check for liveness

==== perfAdmin Visualization ====

perfAdmin is a series of CGI scripts to visualize perfSONAR data.  Graphs are provided by the [http://code.google.com/apis/visualization/documentation/gallery.html Google Visualization API].  Currently perfAdmin can visualize:

 * Lookup Service Visualization
 * perfSONAR-BUOY Data (Throughput and One Way Delay)
 * PingER Data
 * SNMP MA Data
 * Topology Service Visualization
 
==== PingER GUI ====

Visualization of PingER data is possible through this catalyst based GUI. 

=== Use Cases ===

TBD

=== Future Plans ===

TBD

== Development Tools ==

The development of perfSONAR-PS involves several tools that are meant to make the jobs of developers easier particularly for managing the source code, communication, and tasks to be done.  The following sections offer an introduction to each important item.

=== Git ===

The main perfSONAR-PS source code repository is GIT, more information can be found here:

https://code.google.com/p/perfsonar-ps/source/checkout

==== Repo Organization ====

Specifically the organization of the git repository should resemble this from a high level:

http://wiki.perfsonar-ps.googlecode.com/git/ReleaseManagement/svn.png

The repository has gone through several changes through our development lifecycle.  Please see a [SubversionStructure primer] on how individual directories (e.g. Trunk, Branches) should look to better understand our methodology.  

==== Code Organization ====
 
As described in [SubversionStructure], we have organized the code in such a way to facilitate:

 * Individual service identity
 * Packaging procedures
 * Easy release of specific components
  
=== Wiki ===

The perfSONAR-PS wiki is located on [http://code.google.com Google Code].  Specifically the wiki can accessed in one of two ways:

 * Wiki listing - [http://code.google.com/p/perfsonar-ps/w/list]
 * Wiki _Home_ - [http://code.google.com/p/perfsonar-ps/w/Home]

Access to the wiki is controlled via [https://www.google.com/accounts/ManageAccount Google Accounts], if you have one please see one of the project leaders (listed on the [http://code.google.com/p/perfsonar-ps/ home] page) to add you to the project.  

==== Editing ====

The wiki can be edited via the web interface.  When editing the wiki be sure to follow:

 * Formatting rules:
{{{
#summary ENTER A SUMMARY HERE

<wiki:toc max_depth="6" />

== Introduction ==

... content ...

=== Other Headers ===

... content ....

== Last Updated ==

$Id$
}}}
 * Always enter a log entry (either through the web form or the git commit script) to each addition.  

=== Issue Tracker ===

The project uses the Issue tracker that comes with [http://code.google.com Google Code].  This software is a bit minimal compared to other similar offerings such as [http://www.bugzilla.org/ Bugzilla].  The following is aimed to help a developer:

 * Fill out a bug report
 * Understand how to maintain a bug report through the lifecycle

The issue tracker is located [http://code.google.com/p/perfsonar-ps/issues/list here].

==== Bug Reports ====

Each Bug report main contain certain items:

 # _*Summary*_ - One line description that will be visible in the [http://code.google.com/p/perfsonar-ps/issues/list issue tracker] 
 # _*Description*_ - Longer description of the bug.  Each update must contain some action that was taken in this field.  
 # _*Status*_ - Status of the bug, there are two categories and several states in each:
   * _*Open*_ Issues
     * _New_ - Issue has not had initial review yet
     * _Accepted_ - Problem reproduced / Need acknowledged
     * _Started_ - Work on this issue has begun   
     * _Complete_ - Work on this issue is complete / Need Review
     * _Stalled_ - Work on this issue has stopped
     * _Held_ - This issue requires further review
   * _*Closed*_ Issues 
     * _Fixed_ - Developer made requested changes, QA should verify
     * _Verified_ - QA has verified that the fix worked
     * _Invalid_ - This was not a valid issue report
     * _Duplicate_ - This report duplicates an existing issue
     * _!WontFix_ - We decided to not take action on this issue
 # _*Owner*_ - Designated developer for this bug.  Change this as needed (e.g. a multi-step bug may be moved from the developer to a member of the release team for integration).  
 # _*CC*_ - Add in other project members who have a vested interest in the issue.  
 # _*Labels*_ - 
   * _*Type*_ 
     * _Defect_ - Report of a software defect
     * _Enhancement_ - Request for enhancement
     * _Task_ - Constructive work item
     * _Patch_ - Source code patch for review
     * _Other_ - Some other kind of issue
   * _*Priority*_ 
     * _Critical_ - Must resolve in milestone
     * _High_ - Strongly want to resolve in milestone
     * _Medium_ - Normal priority
     * _Low_ - Might slip to later milestone
   * _*!OpSys*_ 
     * _All_ - Affects all operating systems
     * _Windows_ - Affects Windows users
     * _Linux_ - Affects Linux users
     * _OSX_ - Affects Mac OS X users
   * _*Milestone*_ 
     * _Action_ - Actions Items
     * _Release0.9_ - perfSONAR-PS January 2008 Release (<font color="red">depreciated</font>)
     * _Release1.0_ - perfSONAR-PS July 2008 Release (<font color="red">depreciated</font>)
     * _Release3.1_ - perfSONAR-PS Summer/Fall 2009 Release (<font color="red">depreciated</font>)
     * _Release3.1.1_ - pSPT November 2009 Bugfix Release (<font color="red">depreciated</font>)
     * _Release3.1.2_ - pSPT January 2010 Bugfix Release (<font color="red">depreciated</font>)
     * _Release3.1.3_ - pSPT April 2010 Bugfix Release (<font color="red">depreciated</font>)
     * _Release3.1.4_ - pSPT Summer 2010 Bugfix Release (<font color="red">depreciated</font>)
     * _Release3.2_ - perfSONAR-PS/pSPT 2010 Release (<font color="red">depreciated</font>)
     * _Release3.2.1_ - perfSONAR-PS/pSPT Early 2011 Bugfix Release
     * _Release3.2.2_ - perfSONAR-PS/pSPT Late 2011 Bugfix Release
     * _Release3.3_ - perfSONAR-PS/pSPT Release
     * _Future_ - perfSONAR-PS Future
   * _*Component*_ 
     * _Issues_ - Issues Information Request
     * _Wiki_ - Wiki Information Request
     * _Docs_ - PerfSONAR-PS documentation
     * _pS-NPToolkit_ - pS-NPToolkit (web-admin/system config)
     * _perfSONAR-PS_ - General Framework - use when unsure of specific parts are unknown
     * _PingER_ - PingER Measurement Archive and Point
     * _SNMP_ - SNMP Measurement Archive
     * _Traceroute_ - Traceroute Tool
     * _LookupService_ - Class Lookup Service (<font color="red">depreciated</font>) 
     * _HomeLookupService_ - Home Lookup Service
     * _GlobalLookupService_ - Global Lookup Service
     * _TopologyService_ - Topology Service
     * _CircuitStatus_ - Circuit Status Measurement Archive (<font color="red">depreciated</font>) 
     * _StatusService_ - Status Measurement Archive
     * _PerfSONARBUOY_ - PerfSONAR-BOUY Measurement Archive (<font color="red">depreciated</font>) 
     * _LSRegistrationDaemon_ - LS Registration Daemon
     * _TL1_ - TL1 Tools
     * _GUI_ - PerfSONAR-PS GUI Tools
     * _perfAdmin_ - CGI Scripts
     * _NAGIOS_ - NAGIOS Plugins
     * _API_ - Programmer Interfaces
   * _*Misc*_ 
     * _Security_ - Security risk to users
     * _Performance_ - Performance issue
     * _Usability_ - Affects program usability
     * _Maintainability_ - Hinders future changes
     * _Documentation_ - Documentation issue
     * _Packaging_ - Issues package construction

==== Bug Lifecycle ==== 

Each bug should go through a typical lifecycle, moving from a start state to one of the closed states.  Each update should include information that addresses the target issue.  Note that labels may be changed at anytime (these will help search later).  

=== Mailing Lists ===

There are several categories of mailing lists, each targeting specific groups of people.

==== Developer Centric ====


|| *List* || *Audience* ||
|| https://lists.internet2.edu/sympa/info/perfsonar-developer || perfSONAR Developers || 
|| https://lists.internet2.edu/sympa/info/ndt-dev || NDT Development || 

==== User Centric ====

|| *List* || *Audience* ||
|| https://lists.internet2.edu/sympa/info/perfsonar-user || perfSONAR Users Group  || 
|| https://lists.internet2.edu/sympa/info/ndt-users || NDT Users || 

==== Low Volume Announcement ====

|| *List* || *Audience* ||
|| https://lists.internet2.edu/sympa/info/perfsonar-announce || perfSONAR Announcements ||
|| https://lists.internet2.edu/sympa/info/ndt-announce || NDT Announcements || 

==== Community Discussion ====


|| *List* || *Audience* ||
|| https://lists.internet2.edu/sympa/info/is-wg || NTAC Information Services Working Group ||
|| https://lists.internet2.edu/sympa/info/performance-wg || NTAC Performance Working Group ||
|| https://lists.internet2.edu/sympa/info/dcn-wg || DCN Working Group ||
|| http://www.ogf.org/mailman/listinfo/nm-wg || Network Measurement Working Group ||
|| http://www.ogf.org/mailman/listinfo/nml-wg || Network Markup Language Working Group ||
|| http://www.ogf.org/mailman/listinfo/nmc-wg || Network Measurement Control Working Group ||
|| http://www.ogf.org/mailman/listinfo/nsi-wg || Network Service Interface Working Group ||


== Development Practices ==

TBD

=== Release Process ===

TBD

=== Code Rules ===

TBD

== Project Development ==

TBD

=== Services ===

TBD

=== GUIs ===

TBD

=== Packaging ===

TBD

=== Testing ===

TBD

== Last Updated ==

$Id$